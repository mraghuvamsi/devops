# Docker  Control   Groups

* Memory,
* CPU,
* Disk I/O(Volumes),
* Network,
* etc

## Memory:
 ```
 # free -h
 # docker stats
 ```



* By default, a container has no resource constraints (restrictions) 
and can use as much of a given resource as the host’s kernel scheduler allows. 

* But, We can  control (restrictions) memory , CPU, disk , network  for a container by cgroups
* while Create a container by “docker run” command.


## support swap limit capabilities or the cgroup:

* Edit the vi  /etc/default/grub
* Add the following two key-value pairs:
* GRUB_CMDLINE_LINUX="cgroup_enable=memory swapaccount=1"
* sudo update-grub
* sudo reboot



## Memory

## There are two basic types of memory.

### RAM ans HD are first type of memory:

> Random access memory (RAM), is used to store data and very speed I/O, RAM is volatile memory,the data stored in RAM is lost if the server is turned off.

> Hard drives are magnetic media used for long-term storage of data and programs. Magnetic media is nonvolatile; the data stored on a disk remains even when power off. 

### Swap space is the second type of memory

> The primary function of swap space is to substitute disk space for RAM memory when real RAM fills up and more space is needed.
The total amount of memory in a Linux computer is the RAM plus swap space and is referred to as virtual memory.

Total memory =   ram +  swap


> note:   swamp memory can double the ram size
   ex: for 2gb ram we can take 4gb swap space
       total memory = 6gb


## We can  control  memory by below options

```

1) -m or --memory=   
it represents, The maximum amount of memory the container can use and  min is 4mb

Ex1: set memory limit only, container can use 300M memory,  swap memory 600M

# docker run --name c1 -m 300M  -d -p 8081:8080 tomcat
# docker stats
# docker inspect c1


2) --memory-swap* 
it represents the total amount of memory and swap also

Ex2: to set memory limit, disabled swap memory limit,  container can use only 300M memory,  as much swap memory as need.

# docker run  --name c1 -m 300M --memory-swap -1  -d -p 8081:8080 tomcat
# docker run  --name c2 -m 300M --memory-swap 1G  -d -p 8082:8080 tomcat
# docker stats
# docker inspect c1


3) --memory-reservation
it request additional memory, after hitting in to memory limit,to preventing service outages

hard limit     :  It is  actual memory (300M)
soft limit     :  It is reservation memory (100M)
Exp:
To sets a hard limit, the container be allowed to use more than 300MB of RAM. Alternatively, we could set a soft limit. It is request to additional memory
Soft limits ensure our container can still request additional memory of 100MB  after hitting its limit 300MB, to preventing service outages

# docker run --name c1 -m 300M --memory-reservation 100M -d -p 8081:8080 tomcat
# docker stats
# docker inspect c1



```


## We can  control  CPU   by below options

```
1) --cpus=<value>  :
 Specify how much of the available CPU resources a container can use. For instance, if the host machine has two CPUs and you set --cpus="0.25",
 specifies the percentage of available CPU resources a container can use

 Ex: 

 # lscpu
 # docker run --name c1 --cpus=0.25 -m 300M  -d -p 8081:8080 tomcat
 # docker stats
 # docker inspect c1

2) --cpuset-cpus  :
Limit the specific CPUs or cores a container can use,On a 4 core host machine we can specify 0-3. We can specify a single core or even multiple cores

# docker run --name c1 --cpuset-cpus=0 -m 300M --memory-reservation 100M -d -p 8081:8080 tomcat
# docker stats
# docker inspect c1
```
## ## We can  control  DISK (volume).

```


```







